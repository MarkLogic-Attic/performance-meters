<html xmlns="http://www.w3.org/1999/xhtml">
<!--
/*
 * Copyright (c)2005-2006 Mark Logic Corporation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * The use of the Apache License does not indicate that this project is
 * affiliated with the Apache Software Foundation.
 */
-->
<head>
<title>PerformanceMeters README</title>
</head>
<body>
<h1>PerformanceMeters</h1>

<h2>Running PerformanceMeters</h2>
<p>The entry point is the main method in the
 com.marklogic.performance.PerformanceMeters class.
It takes zero or more property files as its arguments.
Any specified system properties will override file-based properties,
and properties found in later files may override properties
specified in earlier files on the command line.
It's also possibly to specify properties as VM arguments (-DNAME=value).
See src/performance-meters.sh for a sample shell script.
</p>
<p>Every test is driven by an XML configuration file.
See src/tests for sample property and XML files.
</p>

<h2>Required libraries:</h2>
<ul>
  <li>MarkLogic <a href="http://developer.marklogic.com/">XDBC</a></li>
</ul>

<h2>Available properties:</h2>
<table>
<tr><th>Property</th><th>default value</th><th>notes</th></tr>

<tr><td>host</td><td>localhost</td>
  <td>host id for all test connections.</td></tr>

<tr><td>port</td><td>8003</td>
  <td>host id for all test connections.</td></tr>

<tr><td>user</td><td>admin</td>
  <td>username for all test connections.</td></tr>

<tr><td>password</td><td>admin</td>
  <td>password for all test connections.</td></tr>

<tr><td>inputPath</td><td>null</td>
  <td>filesystem path to XML configuration file.</td></tr>

<tr><td>outputPath</td><td>null</td>
  <td>filesystem path to directory where results will be written.</td></tr>

<tr><td>numThreads</td><td>1</td>
  <td>number of concurrent test threads.</td></tr>

<tr><td>reportTime</td><td>true</td>
  <td>If true, query timings will be reported in the results file.</td></tr>

<tr><td>reportPercentileDuration</td><td>0</td>
  <td>If non-zero, the ms for the stated percentile of test durations
  will be reported. Common values are 95 and 98.</td></tr>

<tr><td>testTime</td><td>Long.MAX_VALUE (2^63 - 1)</td>
  <td>Test duration, in seconds.</td></tr>

<tr><td>isRandomTest</td><td>false</td>
  <td>If true, the TestList will be shuffled at random.
  In this case, randomSeed may also be set.
  </td></tr>

<tr><td>recordResults</td><td>false</td>
  <td>If true, the results of every test query will be recorded
  in the results file.</td></tr>

<tr><td>checkResults</td><td>false</td>
  <td>If true, test results will be checked
      against the expected values in the XML test configuration file.
      Mismatches will be recorded as errors.
  </td></tr>

<tr><td>shared</td><td>false</td>
  <td>If true, one TestList will be shared by all threads.
  In this case, the TestList must implement its own synchronization.
  </td></tr>

<tr><td>testType</td><td>XDBC</td>
  <td>Type of test to run.
  Supported values are XDBC, HTTP, and URI.
  </td></tr>

<tr><td>reporter</td><td>XMLReporter</td>
  <td>Pluggable class used to generate results files.
    Supplied implementations are XMLReporter
    and CSVReporter (suitable for Excel imports).
  </td></tr>

<tr><td>testListClass</td>
  <td>com.marklogic.performance.XMLFileTestList</td>
  <td>Support for pluggable TestList classes,
    which supply test configurations.
    The default value uses the built-in, XML-file test list.
    For an example of another TestList implementation,
    see the com.marklogic.performance.ElementWordTestList class.
  </td>
</tr>

<tr><td>randomSeed</td><td>0</td>
  <td>Seed for pseudo-random number generator.
    Only useful for random tests.</td></tr>

<tr><td>elementQName</td><td>null</td>
  <td>Element QName for com.marklogic.performance.ElementWordTestList class.
    Only used when testListClass is set to use ElementWordTestList.</td></tr>

<tr><td>readSize</td><td>0</td>
  <td>buffer size, in Bytes, for network and file reads.</td></tr>

</table>
</body>
</html>